{
    "targets": [
        {
            "name": "request_headers",
            "type": "json_file",
            "input": {
                "name": "headers.json"
            }
        },
        {
            "name": "update_cookie",
            "type": "request",
            "input": {
                "request": {
                    "uri": "http://bgm.tv",
                    "headers": "{{ target.request_headers }}"
                }
            }
        },
        {
            "name": "set_cookie",
            "type": "set_cookie",
            "input": {
                "request": {
                    "uri": "http://bgm.tv/pm",
                    "headers": "{{ target.request_headers }}"
                },
                "set_cookie": "{{ target.update_cookie.headers['Set-Cookie'] }}"
            }
        },
        {
            "name": "get_html",
            "type": "request",
            "input": {
                "request": "{{ target.set_cookie }}"
            }
        },
        {
            "name": "decode",
            "type": "base64_decode",
            "input": {
                "text": "{{ target.get_html.body }}"
            }
        },
        {
            "name": "transform",
            "type": "xslt",
            "options": {
                "xslt": "bgm.xslt"
            },
            "input": {
                "text": "{{ target.decode }}",
                "type": "html"
            }
        }
    ],
    "files": [
        {
            "name": "bgm.xslt",
            "path": "../targets/test/bgm.xslt"
        },
        {
            "name": "headers.json",
            "path": "./headers.json"
        }
    ]
}
